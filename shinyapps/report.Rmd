---
output: 
  html_document:
    theme: flatly
params:
  URM: NA
  UH_list: NA
  GHM_num_list: NA
  GHM_lettre_list: NA
  date_range: NA
  global_stats: NA
  geographic_global: NA
  condition_table: NA
  age_table: NA
  acts_table: NA
  categorie_table: NA
  URM_origine_table: NA
  GHM_lettre_table: NA
  age_histogram: NA
---

<style type="text/css">

h1 {
  font-family: 'Helvetica Neue', sans-serif;
  font-size: 40px;
  font-weight: bold;
}

h3 {
  font-weight: bold;
}

</style>

# Rapport d'activité (URM : ``r params$URM``)

  - UH étudiées : ``r params$UH_list``
  - Numéros de GHM : ``r params$GHM_num_list``
  - Catégories de GHM : ``r params$GHM_lettre_list``
  - Période étudiée (dates d'entrée) : ``r format(as.Date(params$date_range[1]), "%d-%m-%Y")`` - ``r format(as.Date(params$date_range[2]), "%d-%m-%Y")``


```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, message = FALSE, comment = FALSE, out.width = "100%")
```


<div class = "row">

<div class = "col-md-6">

### Statistiques globales

  - Total séjours : **``r params$global_stats["n_sejours"]``**
  - Total patients : **``r params$global_stats["n_patients"]``**
  - Durée cumulée des séjours : **``r format(params$global_stats["total_sejour"], scientific=FALSE)``**
  - Durée moyenne de séjour : **``r round(params$global_stats["moyenne_sejour"], digits=3)``**

</div>

<div class = "col-md-6">

### Classes de GHM

```{r}
params$GHM_lettre_table
```
</div>

</div>

### Répartition géographique

```{r}
params$geographic_global
```


### Catégories d'âge

<div class = "row">

<div class = "col-md-6">
```{r}
params$age_table
```
</div>

<div class = "col-md-6">
```{r}
plot(params$age_histogram)
```
</div>

</div>

```{asis, eval=(params$condition_table != "NA"), echo=TRUE}
### Statistiques par diagnostiques CIM-10
```

```{r, eval=(params$condition_table != "NA")}
params$condition_table
```


```{asis, eval=(params$acts_table != "NA"), echo=TRUE}
### Statistiques par actes CCAM
```

```{r eval=(params$acts_table != "NA")}
params$acts_table
```


```{asis, eval=(params$categorie_table != "NA"), echo=TRUE}
### Résumé par catégorie d'acte
```

```{r eval=(params$categorie_table != "NA")}
params$categorie_table
```


### URM d'origine

```{r}
params$URM_origine_table
```
